$def with (info)
<!DOCTYPE html>
<html>
<head>
	<title>Caplain Pro2 status logger</title>
	<link href="/static/css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet">
	<script src="/static/js/jquery-1.9.1.js"></script>
	<script src="/static/js/jquery-ui-1.10.3.custom.js"></script>
	<script>
		function set_servo_req(channel, event, ui) {
			console.log(channel, event, ui)
			$$.post('/api/set/servo', {
				'channel': channel,
				'pulse': ui.value
			})
		};

		function update_state(all) {
			console.log(all)

			$$('#status-rpy').text(all['rpy'])
			$$('#status-trm').text(all['trm'])
			$$('#status-bar-pressure').text(all['bar']['pressure'])
			$$('#status-bar-temperature').text(all['bar']['temperature'])
		}

		function poll_getall() {
			$$.ajax({
				url: '/api/get/all',
				success: update_state,
				dataType: 'json',
				complete: setTimeout(poll_getall, 1000),
				timeout: 2000
			})
		}

		$$(function() {
			$for i in range(8):
				$$("#slider_$i").slider({
					min: 800,
					max: 2200,
					value: 1500,
					slide: function(ev, ui){ set_servo_req($i, ev, ui) }
				})

			$$("#engine-stop").button({
				icons: { primary: 'ui-icon-circle-close' },
			})
			$$("#engine-stop").click(function(event) {
				console.log(event)
				$$.post('/api/set/engine-stop', {
					'secret': 'emergency'
				})
			})

			poll_getall()
		});
	</script>
</head>
<body>
	<h1>Captain Pro<sub>2</sub></h1>

	<h2>Board information</h2>
	<ul id="info">
		<li>Firmware: <i>$:info['version']</i></li>
		<li>Sensor test status:
			<ul id="sensor_status">
			$for k, v in info['sens_test'].iteritems():
				<li>$k: <i>
				$if v: OK
				$else: FAIL
				</i></li>
			</ul>
		</li>
	</ul>

	<h2>Sensor status</h2>
	<ul id="status">
		<li>Motor RPY: <span id="status-rpy">$:info['rpy']</span></li>
		<li>Motor temperature: <span id="status-trm">$:info['trm']</span> °C</li>
		<li>Pressure: <span id="status-bar-pressure">$:info['bar']['pressure']</span> Pa</li>
		<li>Baro temperature: <span id="status-bar-temperature">$:info['bar']['temperature']</span> °C</li>
	</ul>

	<h2>Servo control</h2>
	<ul id="servo-sliders">
	$for i in range(8):
		<li>Servo $i: <div id="slider_$i"></div></li>
	</ul>
	<button id="engine-stop">Emergency stop engine</button>
</body>
</html>
